<body> 
<div class = "card">
<div class = "main_card" >
<section>
  <p class = "SidebarComponents"> <%= link_to "Orders", orders_restaurant_path, class:"SidebarComponentsRuby"%></p>
 <p class = "SidebarComponents"> <%= link_to "Menu", menu_restaurant_path, class:"SidebarComponentsRuby"%></p>
  <p class = "SidebarComponents"><%= link_to "Users", users_restaurant_path, class:"SidebarComponentsRuby"%></p>
  <p class = "SidebarComponents"><%= link_to "Reports", reports_restaurant_path, class:"SidebarComponentsRuby"%></p>
</section>
<section class = "style_card">
<p class = "queue-css"><%= link_to "My Queue", orders_restaurant_path, class:"BarComponentsRuby"%>
  <%= link_to "All Orders", all_orders_path, class:"BarComponentsRuby"%>
  <%= link_to "Completed Orders", completed_orders_path, class:"BarComponentsRuby"%>
  </p>
  <br>
  <hr>
  <%# <% @orders_queue=Order.where.not(status: "Delivered").and (Order.where.not(status: "Cancelled"))%>
<% orders_queue = Order.orders1cache.to_a%>
<% orders_queue.each do |order|%>
    <div class = "main_card_orders">
     <br>
      <section class = "parllel">
        <p class = "OrderNo">Order Id: #<%= order.id %></p>
        <%= form_with(url: "/orders1/#{order.id}"  , method: "put") do |form| %> 
       <% if order.status!="Pending" %>
           <% status=order.status%>
      <% else %>
          <% status="Pending"%>
       <% end %>
         <%= form.select :status, options_for_select(["Pending","Cancelled", "Add to queue", "Preparing", "Delivered"],status)%>
        <% if Owner.find_by(email: current_owner.email)%>
        <%= form.submit "Update",{class: "Update"} %>
        <% elsif Worker.find_by(email: current_owner.email)%>
        <%= form.submit "Update",class: "Update_Not", disabled: "true" %>
        <% end %>
      </section>
      <%end%>
      <section class = "parllel_name_status">
      <p class = "user_name">Customer name: 
      <%cache do%>
      <%= User.find(order.user_id).name%>
      <% end %>
       </p> 
      <p class = "rightside_status"> Status: <%= order.status %></p>
      </section>
      <section class = "date_style"> 
      <p class = "status-color"> Ordered on: </p>
      <img src="https://www.shutterstock.com/image-illustration/calendar-icon-isolated-date-line-600w-1055897141.jpg" class = "date_image">
      <p class = "date"><%= order.created_at.in_time_zone("Chennai").strftime("%b %d, %Y at %l:%M %p")%></p>
      </section>
      <% if order.status!="Pending"%>
      <section class = "date_style">
      <p class = "status-color"> Updated on: </p>
      <img src="https://www.shutterstock.com/image-illustration/calendar-icon-isolated-date-line-600w-1055897141.jpg" class = "date_image">
      <p class = "date"><%= order.updated_at.in_time_zone("Chennai").strftime("%b %d, %Y at %l:%M %p")%></p>
      </section>
      <% end %>
      <p class = "items">Items: </p>
      <p class = "menu">
      <% @cost=0 %>
      <% order.menu.split("+") do |o| %>
       
       <br>
        <% str= o.split("*")%>
        <%= str[0]%>
        &nbsp;&nbsp;&nbsp;&nbsp;<%= "X "+str[1]%>
        
        <%end %>
      <br>
      </p>
       <br>
       
</div>
<% end%>
</section>
</div>
</div>
</body>