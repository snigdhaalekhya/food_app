<body> 
<div class = "main_card">
<section class = "style_card">
 <p class = "menu_style">
   <%= link_to "Menu", view_user_path, class:"BarComponentsRuby"%>
  <%= link_to "My Orders", orders_path, class:"BarComponentsRuby"%>
  <%= link_to "Cart", carts_path, class:"BarComponentsRuby"%>
  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKGxujYqqoJ2wjE-cUDwfmfhjX-ls8t7TAcwcfgjd5LspLpQnT7-pXfP_pVapr9qF1kZQ&usqp=CAU" class = "cart_image" > 
   <% c = 0%>
  <% model_user(Cart).each do |cart|%>
    <%c = c+cart.count%>
  <% end %>
  <% if c!=0%>
  <%= c%>
  <% end %>
  <input type = "image" class = "notification_image" src="https://icones.pro/wp-content/uploads/2022/02/icone-de-cloche-grise.png"  onclick = "notificationToggle();">
   <%= method_status("Delivered").count%>
  <div class = "notification_action">
   <div class = "NotificationToggle">
   <% method_status("Delivered").each do |del|%>
   <section class = "display_css">
   <p>Order no: #<%= del.id %> was Delivered?</p>
   <%= button_to "Yes", "/orders/#{del.id}", method: "put", class:"YesHeader"%>
   </section>
   <%end%>
  </div>
  </p>
  <script>
     function notificationToggle(){
        const toggleMenu = document.querySelector('.NotificationToggle');
        toggleMenu.classList.toggle('active')
     }
  </script>

  <br>
  <hr>
  <%= form_tag(view_user_path, method:"get") do%>
    <section class = "SearchMenu">
     <%= search_field_tag :search, params[:search], placeholder: "Search menu",class:"searchmenu"%>
    </section>
  <% end %>
<% if params[:search].blank? %>
<% Menu.cachemethod.each do |menu|%>
<div class = "row">
  <div class = "column">
    <div class = "displaycard">
     <br>
      <p class = "name"><%= menu.menu_name %></p>
      <p class = "description"><%= menu.menu_description %></p>
      <p class = "cost"><%= menu.menu_cost%> ₹</p>
      <div class = "buttoncard">
      <%= form_with(url: "/carts/#{menu.id}"  , method: "get") do %>
         <input type = "submit" value = "+" class = "plus" name="Add" id = "Add"  >     
      <% end %>
     
       <section class = "count_show">
         <% carts_menuid = model_user(Cart).where(menu_id: menu.id)%>
         <% carts_menuid.each do |cart|%>
         <%= cart.count%>   
         <% end%>
      </section>

      <%= form_with(url: "/carts/#{menu.id}/remove"  , method: "get") do %>
         <input type = "submit" value = "-" class = "minus" name="Add" id = "Subtract"  > 
      <% end%>
      </div>
      <br>
    </div>
  </div>

<%end%>
<% elsif @results.count>0%>
       <% @results.each do |result| %>
       <div class = "row">
  <div class = "column">
    <div class = "displaycard">
     <br>
      <p class = "name"><%= result.menu_name %></p>
      <p class = "description"><%= result.menu_description %></p>
      <p class = "cost"><%= result.menu_cost%> ₹</p>
      <div class = "buttoncard" >
      <%= form_with(url: "/carts/#{result.id}"  , method: "get") do %>
         <input type = "submit" value = "+" class = "plus" name="Add" id = "Add"  >     
      <% end %>
     
       <section class = "count_show">
         <% carts_menuid = model_user(Cart).where(menu_id: result.id)%>
         <% carts_menuid.each do |cart|%>
         <%= cart.count%>   
         <% end%>
      </section>

      <%= form_with(url: "/carts/#{result.id}/remove"  , method: "get") do %>
         <input type = "submit" value = "-" class = "minus" name = "Add" id = "Subtract"  > 
      <% end%>
      </div>
      <br>
    </div>
  </div>
       <% end %>
<% else %>
<p> Oops not found! </p>
<% end %>

</section>
</div>
</body>

